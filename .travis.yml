#language: ruby
sudo: false
#rvm:
#  - 2.3.0
matrix:
  fast_finish: true
  allow_failures:
    - env: EMACS_VERSION=snapshot
    - env: EMACS_VERSION=24.5
cache:
  - bundler
  - directories:
      - "$HOME/emacs"
env:
  global:
    - secure: "TojpYBHhVrK0TZkUCDLgl8Rew5Qu9dfo+X8O1W8VkQyiVO18MPvDeyBMNJGAZL91abG/pDuGJ0KSdO1QOqx72+E7NR9nKb/MPW/8iGJLMRFA0AHsuoeO1AndcePG7Qk2CjB6i686vEfmQmrhOK9NRwkfjbdSwVa1Zxc/uUYImvPR/pMDfVKQlveFCm6y14sWoJPRTmtehHGqRRzc2aH9iVjB7WbLD6I1r/KOPD6QrbQ49I0rHBK4TbW1zi1ErPtXXNfE8mDCojYj0QT/fvs1F9Iv7QYxUnjt+CZsJui7XwocWoa270WE+6nh/ryIBbb41E9FTrx6brOpOwqZcijgLKn0yhO6owL/03c0/x1wiM+k153+7XbC9GI3g1gv7svBK7jl8cXrhPkuAWl974pFH+zO0aLVQZq2zEagjs4dD5YViVlKx0/lehAT8Jt7vI8JbBiv1TurjCEUBTTUiSiVINRseba2m4zlXR9kkwC+1rFI9UbNdz1OohZkHbCX9w0l4Qz8GG+sc2G1PHh9YO9bGyjup4Kab1CC5NCV/BJE63D+Y4MqHI01WwWrL+m/EifteBQVnoA4qF6Wn9ZCH52zdLjYyCGQKp+PfWYIfSPVe5TWrFdhlEC23dd3J/qf6ckZ9QU8THOkx1babXOyP766VBMe26FmwqLaX9N+7D1zzF4="

  matrix:
    - EMACS_VERSION=24.5
    - EMACS_VERSION=25.1-rc2
    - EMACS_VERSION=25.1
    - EMACS_VERSION=25.2
    - EMACS_VERSION=snapshot
before_install:
  - export PATH="$HOME/bin:$PATH"
  - mkdir bin/
  - wget -P bin/screenfetch https://raw.githubusercontent.com/KittyKatt/screenFetch/master/screenfetch-dev
  - chmod +x bin/screenfetch
  - git clone https://github.com/saitoha/seq2gif.git
  - cd seq2gif && ./configure --prefix=$TRAVIS_BUILD_DIR && make && make install && cd ..

addons:
  apt:
    packages:
      - ttyrec
after_success:
  - .travis/push.sh
script:
  - stty rows 24
  - stty columns 80
  - echo -e "lines\ncols"|tput -S
  - stty size
  - if [[ -n $EMACS_VERSION ]]; then make -f emacs-travis.mk install_emacs; fi
#  - "./run-ci.sh minimal.el"
  - "./run-ci.sh vanilla.el"
#  - "./run-ci.sh themes.el"

